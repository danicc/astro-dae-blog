---
import { getRelativeLocaleUrl } from "astro:i18n";

import { getLangFromUrl } from "@i18n/utils";
const { pathname } = Astro.url;
const lang = getLangFromUrl(Astro.url);

const normalizedPathname = pathname
  .replace(import.meta.env.BASE_URL, "/")
  .replace(/\/\/+/g, "/");

const isPortfolioActive = normalizedPathname.startsWith(`/${lang}/portfolio`);
const isBlogActive = normalizedPathname.startsWith(`/${lang}/blog`);
---

<nav class="text-white" transition:name="hero-to-nav">
  <ul class="flex flex-row gap-4">
    <li class:list={[isPortfolioActive && "border-b-4 border-blue-500"]}>
      <a href={getRelativeLocaleUrl(lang, "portfolio")}>Portfolio</a>
    </li>
    <li class:list={[isBlogActive && "border-b-4 border-blue-500"]}>
      <a href={getRelativeLocaleUrl(lang, "blog")}>Blog</a>
    </li>
  </ul>
</nav>
